## API Report File for "ot-engine-common"

> Do not edit this file. It is a report generated by [API Extractor](https://api-extractor.com/).

```ts

// @public (undocumented)
export type AgentInfo = {
    custom?: any;
    docId: string;
    collection: string;
};

// @public (undocumented)
export type AgentInfoKeys = keyof AgentInfo;

// @public (undocumented)
export function applyAndInvert<S, P, Pr, I extends boolean>(snapshot: S, op: P, invert: I, otType: OTType<S, P, Pr>): I extends true ? [S, P] : [S, undefined];

// @public (undocumented)
export function assertNever(_: never): void;

// @public (undocumented)
export interface BaseRequest {
    // (undocumented)
    seq: number;
}

// @public (undocumented)
export interface BaseResponse {
    // (undocumented)
    error?: any;
    // (undocumented)
    seq: number;
}

// @public (undocumented)
export type ClientRequest<P, Pr> = RollbackRequest | PresencesRequest | DeleteDocRequest | PresenceRequest<Pr> | GetSnapshotRequest | GetOpsRequest | CommitOpRequest<P>;

// @public (undocumented)
export type ClientResponse<S, P, Pr> = NotifyResponse<P, Pr> | RollbackResponse | DeleteDocResponse | CommitOpResponse<P> | GetOpsResponse<P> | GetSnapshotResponse<S, P, Pr>;

// @public (undocumented)
export interface CommitOpParams<P> extends AgentInfo {
    // (undocumented)
    op: Op<P>;
}

// @public (undocumented)
export interface CommitOpRequest<P> extends Omit<CommitOpParams<P>, AgentInfoKeys>, BaseRequest {
    // (undocumented)
    type: 'commitOp';
}

// @public (undocumented)
export interface CommitOpResponse<P> extends BaseResponse {
    // (undocumented)
    ops?: Op<P>[];
    // (undocumented)
    type: 'commitOp';
}

// @public (undocumented)
export type DeleteDocNotification = Omit<DeleteDocResponse, 'seq'>;

// @public (undocumented)
export type DeleteDocParams = AgentInfo;

// @public (undocumented)
export interface DeleteDocRequest extends Omit<DeleteDocParams, AgentInfoKeys>, BaseRequest {
    // (undocumented)
    type: 'deleteDoc';
}

// @public (undocumented)
export interface DeleteDocResponse extends BaseResponse {
    // (undocumented)
    type: 'deleteDoc';
}

// @public (undocumented)
export interface GetOpsParams extends AgentInfo {
    // (undocumented)
    fromVersion: number;
    // (undocumented)
    toVersion?: number;
}

// @public (undocumented)
export interface GetOpsRequest extends Omit<GetOpsParams, AgentInfoKeys>, BaseRequest {
    // (undocumented)
    type: 'getOps';
}

// @public (undocumented)
export interface GetOpsResponse<P> extends BaseResponse {
    // (undocumented)
    ops?: Op<P>[];
    // (undocumented)
    type: 'getOps';
}

// @public (undocumented)
export interface GetSnapshotParams extends AgentInfo {
    // (undocumented)
    toVersion?: number;
    // (undocumented)
    version?: number;
}

// @public (undocumented)
export interface GetSnapshotRequest extends Omit<GetSnapshotParams, AgentInfoKeys>, BaseRequest {
    // (undocumented)
    type: 'getSnapshot';
}

// @public (undocumented)
export interface GetSnapshotResponse<S, P, Pr> extends BaseResponse {
    // (undocumented)
    presences?: Record<string, Presence<Pr>>;
    // (undocumented)
    snapshotAndOps?: SnapshotAndOps<S, P>;
    // (undocumented)
    type: 'getSnapshot';
}

// @public (undocumented)
export function isSameOp<P>(op: Op<P> | undefined, other: Op<P> | undefined): boolean;

// @public (undocumented)
export function last<T>(arr: T[], index?: number): T;

// @public (undocumented)
export interface Logger {
    // (undocumented)
    log: (...msg: any) => void;
}

// @public (undocumented)
export function noop(): void;

// @public (undocumented)
export type NotifyResponse<P, Pr> = RemoteOpResponse<P> | PresenceResponse<Pr> | PresencesResponse<Pr> | DeleteDocNotification | RollbackNotification;

// @public (undocumented)
export interface Op<P> {
    // (undocumented)
    clientId: string;
    // (undocumented)
    content: P;
    // (undocumented)
    id: string;
    // (undocumented)
    version: number;
}

// @public (undocumented)
export class OTError extends Error {
    constructor(info: {
        subType: OTErrorSubType;
        detail: any;
    });
    // (undocumented)
    info: {
        subType: OTErrorSubType;
        detail: any;
        type: OTErrorType;
    };
    // (undocumented)
    type: OTErrorType;
}

// @public (undocumented)
export type OTErrorSubType = 'deleted' | 'rollback';

// @public (undocumented)
export type OTErrorType = 'otError';

// @public (undocumented)
export type OTSide = 'left' | 'right';

// @public (undocumented)
export type OTType<S, P, Pr> = {
    name: string;
    create?(data: any): S;
    applyAndInvert?<I extends boolean>(snapshot: S, op: P, invert: I): I extends true ? [S, P] : [S, undefined];
    apply?(snapshot: S, op: P): S;
    invert?(op: P): P;
    invertWithDoc?(op: P, snapshot: S): P;
    compose?(op: P, prevOp: P): P | undefined;
    transform(op: P, refOp: P, side: OTSide): P;
    transformPresence?(presence: Pr, refOp: P, isOwnOp: boolean): Pr;
    serialize?(s: S): any;
    deserialize?(data: any): S;
};

// @public (undocumented)
export interface Presence<P> {
    // (undocumented)
    content?: P;
    // (undocumented)
    version: number;
}

// @public (undocumented)
export interface PresenceRequest<Pr> {
    // (undocumented)
    clientId: string;
    // (undocumented)
    presence: Presence<Pr>;
    // (undocumented)
    type: 'presence';
}

// @public (undocumented)
export type PresenceResponse<Pr> = PresenceRequest<Pr>;

// @public (undocumented)
export interface PresencesRequest {
    // (undocumented)
    type: 'presences';
}

// @public (undocumented)
export interface PresencesResponse<Pr> {
    // (undocumented)
    presences: Record<string, Presence<Pr>>;
    // (undocumented)
    type: 'presences';
}

// @public (undocumented)
export interface RemoteOpResponse<P> {
    // (undocumented)
    clientId: string;
    // (undocumented)
    ops: Op<P>[];
    // (undocumented)
    type: 'remoteOp';
}

// @public (undocumented)
export type RollbackNotification = Omit<RollbackResponse, 'seq'>;

// @public (undocumented)
export interface RollbackParams extends AgentInfo {
    // (undocumented)
    version: number;
}

// @public (undocumented)
export interface RollbackRequest extends Omit<RollbackParams, AgentInfoKeys>, BaseRequest {
    // (undocumented)
    type: 'rollback';
}

// @public (undocumented)
export interface RollbackResponse extends BaseResponse {
    // (undocumented)
    type: 'rollback';
}

// @public (undocumented)
export interface SaveSnapshotParams<S> extends AgentInfo {
    // (undocumented)
    snapshot: Snapshot<S>;
}

// @public (undocumented)
export interface Snapshot<P> {
    // (undocumented)
    content: P;
    // (undocumented)
    rollback?: boolean;
    // (undocumented)
    version: number;
}

// @public (undocumented)
export type SnapshotAndOps<S, P> = {
    snapshot: Snapshot<S>;
    ops: Op<P>[];
};

// @public (undocumented)
export function transformPresence<S, P, Pr>(presenceClientId: string, presence_: Pr, refOps: P[], clientIds: string[], otType: OTType<S, P, Pr>): Pr;

// @public (undocumented)
export function transformType<S, P, Pr>(op: P[], refOps: P[], otType: OTType<S, P, Pr>): [any[], any[]];

// (No @packageDocumentation comment for this package)

```
