## API Report File for "ot-engine-client"

> Do not edit this file. It is a report generated by [API Extractor](https://api-extractor.com/).

```ts

import { ClientRequest } from 'ot-engine-common';
import { ClientResponse } from 'ot-engine-common';
import { CommitOpResponse } from 'ot-engine-common';
import { Event as Event_2 } from 'ts-event-target';
import { EventTarget as EventTarget_2 } from 'ts-event-target';
import { Logger } from 'ot-engine-common';
import { Op } from 'ot-engine-common';
import { OTType } from 'ot-engine-common';
import { Presence } from 'ot-engine-common';
import { Snapshot } from 'ot-engine-common';

// @public (undocumented)
export class BeforeOpEvent<P> extends Event_2<'beforeOp'> {
    constructor(ops: P[], clientIds: string[], source: boolean, undoRedo: boolean);
    // (undocumented)
    clientIds: string[];
    // (undocumented)
    ops: P[];
    // (undocumented)
    source: boolean;
    // (undocumented)
    undoRedo: boolean;
}

// @public (undocumented)
export interface ClientRollbackParams {
    // (undocumented)
    version: number;
}

// @public (undocumented)
export class Doc<S = unknown, P = unknown, Pr = unknown> extends EventTarget_2<[
OpEvent<P>,
BeforeOpEvent<P>,
NoPendingEvent,
RemoteOpEvent<P>,
RemoteDeleteDocEvent,
RemotePresenceEvent<Pr>,
RollbackEvent
]> {
    constructor(config: DocConfig<S, P, Pr>);
    // (undocumented)
    get allPendingOps(): PendingOp<P>[];
    // (undocumented)
    apply<T extends boolean>(op: P, invert: T): T extends true ? P : undefined;
    // (undocumented)
    bindToSocket(socket: WebSocket): void;
    // (undocumented)
    callMap: Map<number, (arg: any) => void>;
    // (undocumented)
    canRedo(): boolean;
    // (undocumented)
    canUndo(): boolean;
    // (undocumented)
    checkSend(): Promise<void>;
    // (undocumented)
    clear(): void;
    // (undocumented)
    get clientId(): string;
    // (undocumented)
    closed: boolean;
    // (undocumented)
    config: Required<DocConfig<S, P, Pr>>;
    // (undocumented)
    data: S | undefined;
    // (undocumented)
    delete(): Promise<void>;
    // (undocumented)
    destroy(): void;
    // (undocumented)
    fetch(): Promise<Snapshot<S> | undefined>;
    // (undocumented)
    fireBeforeOpEvent(ops: P[], clientIds: string[], source?: boolean, undoRedo?: boolean): void;
    // (undocumented)
    fireOpEvent(ops: P[], clientIds: string[], source?: boolean, undoRedo?: boolean): void;
    // (undocumented)
    handleCommitOpResponse(res: CommitOpResponse<P>): void;
    // (undocumented)
    handleResponse(response: ClientResponse<S, P, Pr>): Promise<boolean | undefined>;
    // (undocumented)
    inflightOp: PendingOp<P> | undefined;
    // (undocumented)
    localPresenceManager: LocalPresenceManager<S, P, Pr>;
    // (undocumented)
    log(...msg: any[]): void;
    // (undocumented)
    get otType(): OTType<S, P, Pr>;
    // (undocumented)
    pendingOps: PendingOp<P>[];
    // (undocumented)
    get presence(): Pr | undefined;
    // (undocumented)
    redo(): void;
    // (undocumented)
    reloadPresences(presences: Record<string, Presence<Pr>>, fire?: boolean): Map<any, any> | undefined;
    // (undocumented)
    remotePresenceManager: RemotePresenceManager<S, P, Pr>;
    // (undocumented)
    get remotePresences(): Map<string, Pr | undefined>;
    // (undocumented)
    rollback({ version }: ClientRollbackParams): Promise<void>;
    // (undocumented)
    send(request: ClientRequest<P, Pr>): Promise<ClientResponse<S, P, Pr>> | undefined;
    // (undocumented)
    sending: boolean;
    // (undocumented)
    seq: number;
    // (undocumented)
    socket: WebSocket;
    // (undocumented)
    submitOp(opContent: P): void;
    // (undocumented)
    submitPendingOp(op: PendingOp<P>, undoRedo?: boolean): void;
    // (undocumented)
    submitPresence(presence: Pr): void;
    // (undocumented)
    undo(): void;
    // (undocumented)
    undoManager: UndoManager<S, P, Pr>;
    // (undocumented)
    version: number;
    // (undocumented)
    waitNoPending(): Promise<void>;
}

// @public (undocumented)
export interface DocConfig<S, P, Pr> {
    // (undocumented)
    cacheServerOpsLimit?: number;
    // (undocumented)
    clientId: string;
    // (undocumented)
    logger?: Logger;
    // (undocumented)
    otType: OTType<S, P, Pr>;
    // (undocumented)
    socket: WebSocket;
    // (undocumented)
    undoStackLimit?: number;
}

// @public (undocumented)
export class LocalPresenceManager<S, P, Pr> {
    constructor(doc: Doc<S, P, Pr>);
    // (undocumented)
    clear(): void;
    // (undocumented)
    onOp: ({ ops, clientIds }: OpEvent<P>) => void;
    // (undocumented)
    sending: boolean;
    // (undocumented)
    submit(value: Pr): Promise<void>;
    // (undocumented)
    value: Pr | undefined;
}

// @public (undocumented)
export class NoPendingEvent extends Event_2<'noPending'> {
    constructor();
}

// @public (undocumented)
export class OpEvent<P> extends Event_2<'op'> {
    constructor(ops: P[], clientIds: string[], source: boolean, undoRedo: boolean);
    // (undocumented)
    clientIds: string[];
    // (undocumented)
    ops: P[];
    // (undocumented)
    source: boolean;
    // (undocumented)
    undoRedo: boolean;
}

// @public (undocumented)
export interface PendingOp<P> {
    // (undocumented)
    invert: Op<P>;
    // (undocumented)
    op: Op<P>;
}

// @public (undocumented)
export interface PresenceItem<P> {
    // (undocumented)
    normal?: Presence<P>;
    // (undocumented)
    pending?: Presence<P>;
}

// @public (undocumented)
export class RemoteDeleteDocEvent extends Event_2<'remoteDeleteDoc'> {
    constructor();
}

// @public (undocumented)
export class RemoteOpEvent<P> extends Event_2<'remoteOp'> {
    constructor();
    // (undocumented)
    afterOps?: Op<P>[];
    // (undocumented)
    prevOps?: Op<P>[];
    // (undocumented)
    sourceOp?: Op<P>;
}

// @public (undocumented)
export class RemotePresenceEvent<Pr> extends Event_2<'remotePresence'> {
    constructor();
    // (undocumented)
    changed: Map<string, Pr | undefined>;
}

// @public (undocumented)
export class RemotePresenceManager<S, P, Pr> {
    constructor(doc: Doc<S, P, Pr>);
    // (undocumented)
    clear(): void;
    // (undocumented)
    getOrCreatePresenceItem(clientId: string): PresenceItem<Pr>;
    // (undocumented)
    onPresenceResponse(response: {
        clientId: string;
        presence: Presence<Pr>;
    }, changeSet?: Map<string, Pr | undefined>): void;
    // (undocumented)
    onRemoteOp: ({ prevOps, sourceOp, afterOps }: RemoteOpEvent<P>) => void;
    // (undocumented)
    reload(presences: Record<string, Presence<Pr>>, fire?: boolean): Map<any, any>;
    // (undocumented)
    remotePresenceMap: Map<string, PresenceItem<Pr>>;
    // (undocumented)
    get remotePresences(): Map<string, Pr | undefined>;
    // (undocumented)
    serverOps: Op<P>[];
    // (undocumented)
    syncPresence(presenceClientId: string, presence: Presence<Pr>): Presence<Pr> | undefined;
    // (undocumented)
    syncRemotePresences(ops: P[], clientIds: string[], onlyNormal?: boolean): void;
}

// @public (undocumented)
export class RollbackEvent extends Event_2<'rollback'> {
    constructor();
}

// @public (undocumented)
export interface UndoItem<P> {
    // (undocumented)
    invert: Op<P>;
    // (undocumented)
    op: Op<P>;
}

// @public (undocumented)
export class UndoManager<S, P, Pr> {
    constructor(doc: Doc<S, P, Pr>);
    // (undocumented)
    canRedo(): boolean;
    // (undocumented)
    canUndo(): boolean;
    // (undocumented)
    clear(): void;
    // (undocumented)
    get lastPendingOp(): UndoRedoItem<P>;
    // (undocumented)
    onRemoteOp: (e: RemoteOpEvent<P>) => void;
    // (undocumented)
    redo(): void;
    // (undocumented)
    redoStack: UndoRedoStack<S, P, Pr>;
    // (undocumented)
    submitOp(pendingOp: PendingOp<P>): void;
    // (undocumented)
    undo(): void;
    // (undocumented)
    undoRedo(popStack: UndoRedoStack<S, P, Pr>, pushStack: UndoRedoStack<S, P, Pr>): void;
    // (undocumented)
    undoStack: UndoRedoStack<S, P, Pr>;
}

// @public (undocumented)
export interface UndoRedoItem<P> {
    // (undocumented)
    accepted: boolean;
    // (undocumented)
    afterOps: any[];
    // (undocumented)
    invert: Op<P>;
    // (undocumented)
    op: Op<P>;
}

// @public (undocumented)
export class UndoRedoStack<S, P, Pr> {
    constructor(doc: Doc<S, P, Pr>);
    // (undocumented)
    clear(): void;
    // (undocumented)
    get length(): number;
    // (undocumented)
    nextAcceptedIndex: number;
    // (undocumented)
    onRemoteOp({ prevOps, sourceOp, afterOps }: RemoteOpEvent<P>): void;
    // (undocumented)
    pop(): PendingOp<P> & {
        needInvert: boolean;
    };
    // (undocumented)
    push(item: PendingOp<P>): void;
    // (undocumented)
    reduceNextAcceptedIndex(): void;
    // (undocumented)
    stack: UndoRedoItem<P>[];
}

// (No @packageDocumentation comment for this package)

```
